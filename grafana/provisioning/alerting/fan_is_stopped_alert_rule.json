{"id":6,"uid":"WIrA8dHVz","orgID":1,"folderUID":"OHQldHHVk","ruleGroup":"hardware","title":"Fan is stopped","condition":"fan_has_stopped","data":[{"refId":"fan_speed","queryType":"","relativeTimeRange":{"from":60,"to":0},"datasourceUid":"PBFA97CFB590B2093","model":{"editorMode":"builder","expr":"qumulo_fan_speed_rpm","hide":false,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":true,"refId":"fan_speed"}},{"refId":"mean_fan_speed","queryType":"","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"-100","model":{"conditions":[{"evaluator":{"params":[3],"type":"gt"},"operator":{"type":"and"},"query":{"params":["fan speed"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"-100"},"expression":"fan_speed","hide":false,"intervalMs":1000,"maxDataPoints":43200,"reducer":"mean","refId":"mean_fan_speed","type":"reduce"}},{"refId":"fan_has_stopped","queryType":"","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"-100","model":{"conditions":[{"evaluator":{"params":[0,0],"type":"gt"},"operator":{"type":"and"},"query":{"params":["mean fan speed"]},"reducer":{"params":[],"type":"avg"},"type":"query"}],"datasource":{"name":"Expression","type":"__expr__","uid":"__expr__"},"expression":"${mean_fan_speed} \u003c= 0","hide":false,"intervalMs":1000,"maxDataPoints":43200,"refId":"fan_has_stopped","type":"math"}},{"refId":"info","queryType":"","relativeTimeRange":{"from":60,"to":0},"datasourceUid":"PBFA97CFB590B2093","model":{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editorMode":"builder","exemplar":false,"expr":"qumulo_info","hide":false,"instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"info"}}],"updated":"2022-10-26T00:36:04Z","noDataState":"NoData","execErrState":"Error","for":"5m","annotations":{"description":"The {{ $labels.fan }} fan on node {{ $labels.node_id }} in cluster {{ $values.info.Labels.node }} has stopped. Please replace the fan as soon as possible."},"labels":{"severity":"critical"}}